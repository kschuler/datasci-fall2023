{"title":"Data Visualization","markdown":{"yaml":{"title":"Data Visualization","subtitle":"Data Science for Studying Language and the Mind","author":"Katie Schuler","date":"09-07-2023","echo":true,"format":{"revealjs":{"theme":"dark","slide-number":true,"incremental":true,"footer":"[https://kathrynschuler.com/datasci](https://kathrynschuler.com/datasci/)"}}},"headingText":"You are `here`","headingAttr":{"id":"","classes":["smaller"],"keyvalue":[]},"containsRefs":false,"markdown":"\n\n\n:::: {.columns}\n\n::: {.column width=\"33%\"}\n\n##### Data science with R \n::: {.nonincremental}\n- Hello, world!\n- R basics\n- Data importing\n- `Data visualization` \n- Data wrangling \n:::\n:::\n\n::: {.column width=\"33%\"}\n\n##### Stats & Model buidling\n::: {.nonincremental}\n- Probability distributions\n- Sampling variability\n- Hypothesis testing\n- Model specification\n- Model fitting \n- Model accuracy\n- Model reliability\n:::\n:::\n\n::: {.column width=\"33%\"}\n\n##### More advanced \n::: {.nonincremental}\n\n- Classification\n- Feature engineering (preprocessing) \n- Inference for regression\n- Mixed-effect models\n::: \n:::\n\n::::\n\n# Acknowledgements\n\nAdapted from [R for Data Science Ch 2](https://r4ds.hadley.nz/data-visualize)\nand some materials by Dr. Colin Rundel at Duke\n\n\n## Why visualize? \n\n> “The simple graph has brought more information to the data analyst’s mind than any other device.” — John Tukey\n\n## Datasaurus dozen {.smaller}\n\n```{r}\n#| echo: false\nlibrary(tidyverse)\nlibrary(datasauRus)\n\ndatasaurus_dozen %>% \ngroup_by(dataset) %>% \nsummarize(\n    mean_x    = mean(x),\n    mean_y    = mean(y),\n    std_dev_x = sd(x),\n    std_dev_y = sd(y),\n    corr_x_y  = cor(x, y)\n)\n```\n\n\n::: aside\nDatasaurus was created by Alberto Cairo, `library(datasauRus)`\n:::\n\n## Datasaurus dozen {.smaller}\n\n```{r }\n#| echo: false\n#| fig-height: 6\n#| fig-width: 8\n  ggplot(datasaurus_dozen, aes(x = x, y = y, colour = dataset))+\n    geom_point()+\n    theme_classic()+\n    theme(legend.position = \"none\")+\n    facet_wrap(~dataset, ncol = 4)\n```\n\n\n::: aside\nDatasaurus was created by Alberto Cairo\n:::\n\n\n\n## Why visualize? \n\n> \"`Visualization` is a fundamentally human activity. A good visualization will show you things you did not expect or raise new questions about the data. A good visualization might also hint that you’re asking the wrong question or that you need to collect different data. Visualizations can surprise you, but they don’t scale particularly well because they require a human to interpret them.\" -- R4DS\n\n--- \n\n![](/include/figures/ggplot-hexlogo.png){#fig-ggplothexlogo fig-align=\"center\" width=20%}\n\n## ggplot2 loads with tidyverse\n\n```{r}\n#| echo: true\n#| message: true\nlibrary(tidyverse)\n```\n\n## Why ggplot2? \n\n> \"R has several systems for making graphs, but ggplot2 is one of the most elegant and most versatile. ggplot2 implements the `grammar of graphics`, a coherent system for describing and building graphs. With ggplot2, you can do more and faster by learning one system and applying it in many places.\" -- R4DS\n\n\n\n## Today's data: `ratings` {.smaller}\n\n> Subjective frequency ratings, ratings of estimated weight, and ratings of estimated size, averaged\nover subjects, for 81 concrete English nouns. -- languageR\n\n```{r}\n#| echo: true\nlibrary(languageR)\nglimpse(ratings)\n```\n\n## Today's data: `ratings` {.smaller}\n\nWe will make use of the following variables:\n\n1. `Frequency` - actual word frequency\n2. `meanFamiliarity` - subjective frequency rating\n3. `Class` - whether word is a plant or animal\n\n. . . \n\n```{r}\n#| echo: false\nratings %>% \n    select(Word, Frequency, meanFamiliarity, Class) %>%\n    glimpse()\n```\n\n## Today's goal {.smaller}\n\nCreate this figure showing the relationship between actual frequency and subjective frequency rating of each word, considering the class the word belongs to\n\n\n\n```{r}\n#| echo: false\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) +\n  scale_color_brewer(palette = \"Paired\")\n```\n\n\n# The basic ggplot\n\n1. Using your `data`\n2. define how variables in your dataset are mapped to visual properties (`aesthetics`)\n3. determine the geometrical object that a plot uses to represent data (`geom`)\n\n\n\n## 1 `data` {.smaller}\n\n> Use `ratings` data\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"1-3\"\nggplot(\n    data = ratings\n )\n```\n\n## 2 `aesthetic mapping` {.smaller}\n\n> Map `Frequency` to x-axis and `meanFamiliarity` to y-axis. \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"3-6\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n )\n```\n\n## 3 `geom` {.smaller}\n\n> Represent each value with a point.\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point()\n```\n\n# Adding to the basics\n\n## Mapping categorical variables {.smaller}\n\n> When a categorical variable is mapped to an aesthetic, ggplot2 will automatically assign a unique value of the aesthetic (here color) ... a process known as `scaling`. -- R4DS\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"6\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity,\n        color = Class\n    )\n ) +\n  geom_point()\n```\n\n\n## Global vs. local `aesthetics` {.smaller}\n\n- **globally** in `ggplot()`, which are passed down to all geoms\n- **locally** in `geom_*()` which are used by that geom only\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class)\n    ) \n```\n\n\n\n## Mapping vs. setting `aesthetics` {.smaller}\n\n- mapping allows us to determine a geom's aesthetics based on a variable, and is passed as argument in `aes()`\n- setting allows us to set a geom's aestheics to a constant value (not based on any variable), and passed as argument in `geom_*()` directly\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"10\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) \n```\n\n\n\n# Labels\n\n\n## `labels`: title and subtitle {.smaller}\n\n> Add title \"Subjective frequency ratings\" with subtitle \"for 81 english nouns\"\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12-15\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\"\n  ) \n```\n\n## `labels`: x and y axis {.smaller}\n\n> Label x-axis \"Actual frequency\" and y-axis \"Frequency rating\"\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"15-16\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\"\n  ) \n```\n\n::: aside \nNote these are mapped to the aesthetic (x and y)\n:::\n\n## `labels`: legend {.smaller}\n\n> Label the legend \"word class\".\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"17\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) \n```\n\n::: aside \nNote these are mapped to the aesthetic as well (color)\n:::\n\n# Theme and adjusting scaling\n\n## `themes` {.smaller}\n\n> Apply classic theme with base_size 20.\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"19\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `scales`: changing color {.smaller}\n\n> Remember: When a categorical variable is mapped to an aesthetic, ggplot2 will automatically assign a unique value of the aesthetic (here color) ... a process known as `scaling`. -- R4DS\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"20\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) +\n  scale_color_brewer(palette = \"Paired\")\n```\n\n# Aesthetics\n\n## color\n\nMap the color aesthetic to a variable\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## color\n\nSet a constant value for the color aesthetic \n\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\",\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n\n## size \n\nSetting a constant value for the size aesthetic\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"10\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## size\n\nMapped the size aesthetic to a variable \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        size = Complex\n    ),\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n## shape\n\nMap the shape aesthetic to a different variable\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Complex),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## shape \n\nMap the shape aesthetic to the same variable \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Class),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n\n## alpha \n\nSet a constant value for the alpha aesthetic\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Class),\n    alpha = 0.5,\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## alpha\n\nMapped to a variable \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Class,\n        alpha = Length),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n# Geometric objects \n\n## `geom_*()` aka geoms {.smaller}\n\nThere are [many](https://ggplot2.tidyverse.org/reference/#geoms). We will start with these, and add a few additional geoms as we move through the course: \n\n| | |\n| --- | ------- | \n| `geom_histogram()` | histogram, distribution of a continuous variable |\n| `geom_density()` | distribution of a continuous variable |\n| `geom_bar()` | distribution of a categorical data | \n| `geom_point()` |  scatterplot |\n| `geom_smooth()` | smoothed line of best fit |\n\n## `geom_histogram()` \n\n> A histogram divides the x-axis into equally spaced bins and then uses the height of a bar to display the number of observations that fall in each bin. -- R4DS\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"7\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram() \n\n```\n\n## `geom_histogram()`\n\nbins - How many bins should we have? \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        bins = 10\n    )\n\n```\n\n\n## `geom_histogram()`\n\nbinwidth - How wide should the bins be?  \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        binwidth = 0.25\n    )\n\n```\n\n## `geom_histogram()`\n\ncolor - What should the outline color be? \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        binwidth = 0.25,\n        color = \"red\"\n    )\n\n```\n\n## `geom_histogram()`\n\nfill - What should the fill color be? \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"10\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        binwidth = 0.25,\n        color = \"red\",\n        fill = \"lightblue\"\n    )\n\n```\n\n## `geom_density()` {.smaller}\n\n> Imagine a histogram made out of wooden blocks. Then, imagine that you drop a cooked spaghetti string over it. The shape the spaghetti will take draped over blocks can be thought of as the shape of the density curve. -- R4DS \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"7\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_density() \n\n```\n\n## `geom_density()`\n\nMap Class to color aesthetic \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"5\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity,\n        color = Class\n    )\n) + \n    geom_density() \n\n```\n\n## `geom_density()`\n\nSet linewidth \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity,\n        color = Class\n    )\n) + \n    geom_density(linewidth = 2) \n\n```\n\n## `geom_density()`\n\nMap Class to fill and set alpha \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity,\n        fill = Class\n    )\n) + \n    geom_density(alpha = 0.5) \n\n```\n\n## `geom_bar()` {.smaller}\n\n> To examine the distribution of a categorical variable, you can use a bar chart. The height of the bars displays how many observations occurred with each x value. -- R4DS\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class\n    )\n) + \n    geom_bar()\n\n```\n\n## `geom_bar()` - stacked {.smaller}\n\nWe can use stacked bar plots to visualize the relationship between two categorical variables\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"5\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class,\n        fill = Complex\n    )\n) + \n    geom_bar()\n\n```\n\n## `geom_bar()` - relative frequency {.smaller}\n\nWe can use relative frequency to visualize the relationship between two categorical variables (as a percentage)\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class,\n        fill = Complex\n    )\n) + \n    geom_bar(position = \"fill\")\n\n```\n\n## `geom_bar()` - dodged {.smaller}\n\nWe can use a dodged bar plot to visualize the relationship between two categorical variables side-by-side, not stacked\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class,\n        fill = Complex\n    )\n) + \n    geom_bar(position = \"dodge\")\n\n```\n\n## `geom_point()` {.smaller}\n\n> Scatterplots are useful for displaying the relationship between two numerical variables -- R4DS\n\n. . . \n\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\", \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth()` {.smaller}\n\ndraws a best fitting curve \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\", \n    size = 3\n    ) +\n  geom_smooth() +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth(method=\"lm\")` {.smaller}\n\ndraws the best fitting linear model\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\", \n    size = 3\n    ) +\n  geom_smooth(method=\"lm\") +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth(method=\"lm\")` {.smaller}\n\nWe can also map to color, by specifying globally\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"6\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity,\n        color = Class\n    )\n ) +\n  geom_point( \n    size = 3\n    ) +\n  geom_smooth(method=\"lm\") +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth(method=\"lm\")` {.smaller}\n\nOr include only a single smooth, by specifying color in the point geom only\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    aes(color = Class),\n    size = 3\n    ) +\n  geom_smooth(method=\"lm\") +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n\n\n# Facets \n\nsmaller plots that display different subsets of data\n\n## `facet_grid()`\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(Class ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n## `facet_grid()` {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(Class ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point(\n    aes(color = Class, shape = Complex)\n  ) +\n  theme_classic(base_size = 20) \n```\n\n\n## `facet_grid()` - just columns {.smaller}\n\nand note we can still map other aesthetics!\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(. ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n## `facet_grid()` - just columns {.smaller}\n\nand note we can still map other aesthetics!\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point(\n    aes(color = Class),\n    shape = \"triangle\"\n  ) +\n  facet_grid(. ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n\n\n## `facet_grid()` - just rows {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(Class ~ .) +\n  theme_classic(base_size = 20) \n```\n\n\n## `facet_wrap()`  {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_wrap(~ Class) +\n  theme_classic(base_size = 20) \n```\n\n## `facet_wrap()` - number of columns {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_wrap(~ Class, ncol = 1) +\n  theme_classic(base_size = 20) \n```\n\n# Helper functions \n\n## remember our goal plot? {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) +\n  scale_color_brewer(palette = \"Paired\")\n```\n\n## `last_plot()` {.smaller}\n\nreturns the last plot\n\n```{r}\nlast_plot()\n```\n\n## `ggsave()` \n\nsaves last plot\n\n```r\nggsave(\"plot.png\", width=5, height=5)\n```\n\n# Themes \n\nggplot comes with many [Complete themes](https://ggplot2.tidyverse.org/reference/ggtheme.html)\n\n## Default theme {.smaller}\n\n```{r}\nlast_plot() + theme_gray(base_size=20)\n```\n\n## Sample themes {.smaller}\n\n:::: {.columns}\n\n::: {.column width=50%}\n\n```{r}\nlast_plot() + theme_bw(base_size=20)\n```\n\n```{r}\nlast_plot() + theme_classic(base_size=20)\n```\n\n::: \n\n::: {.column width=50%}\n\n```{r}\nlast_plot() + theme_minimal(base_size=20)\n```\n\n```{r}\nlast_plot() + theme_void(base_size=20)\n```\n\n::: \n\n::::\n\n\n# Shortcuts \n\n## ggplot2 calls {.smaller}\n\n:::: {.columns}\n\n::: {.column width=50%}\n\nExplicit argument names:\n\n```{r}\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n\n::: \n\n\n::: {.column width=50%}\n\nImplied argument names:\n\n```{r}\nggplot(\n    ratings,\n    aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n::: \n\n::::\n\n\n## the pipe `%>%` {.smaller}\n\n> the pipe takes the thing on its left and passes it along to the function on its right \n\n. . .\n\n`x %>% f(y)` is equivalent to `f(x, y)`\n\n. . . \n\n```{r}\nx <- c(1.0, 2.245, 3, 4.22222)\nx\n\n# pass x as an argument to function usual way\nround(x, digits = 2)\n```\n\n. . . \n```{r}\n# pass x as an argument to function with pipe\nx %>% round(digits = 2)\n```\n\n\n::: aside\nThere are two ways to write the pipe: `%>%` or `|>`\n:::\n\n## the pipe `%>%` and ggplot {.smaller}\n\n\n:::: {.columns}\n\n::: {.column width=50%}\n\nImplied argument names:\n\n```{r}\n#| code-line-numbers: \"2\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n\n::: \n\n\n::: {.column width=50%}\n\nImplied argument names + pipe:\n\n```{r}\n#| code-line-numbers: \"1\"\n\nratings %>% \nggplot(\n    aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n::: \n\n::::\n\n::: aside\nNote that we pipe `%>%` in arguments to functions but we ADD `+` layers to ggplot. Common mistake!\n:::\n\n## Exercise 1\n\n> The basic ggplot\n\n![Data from `penguins` dataframe in `palmerpenguins` package](/include/targets/class-target-basicpenguins.png){#fig-basicpenguintarget}\n\n## Exercise 2\n\n> Adding aesthetics and layers\n\n![Data from `penguins` dataframe in `palmerpenguins` package](/include/targets/class-target-penguins.png){#fig-penguintarget}","srcMarkdownNoYaml":"\n\n## You are `here` {.smaller} \n\n:::: {.columns}\n\n::: {.column width=\"33%\"}\n\n##### Data science with R \n::: {.nonincremental}\n- Hello, world!\n- R basics\n- Data importing\n- `Data visualization` \n- Data wrangling \n:::\n:::\n\n::: {.column width=\"33%\"}\n\n##### Stats & Model buidling\n::: {.nonincremental}\n- Probability distributions\n- Sampling variability\n- Hypothesis testing\n- Model specification\n- Model fitting \n- Model accuracy\n- Model reliability\n:::\n:::\n\n::: {.column width=\"33%\"}\n\n##### More advanced \n::: {.nonincremental}\n\n- Classification\n- Feature engineering (preprocessing) \n- Inference for regression\n- Mixed-effect models\n::: \n:::\n\n::::\n\n# Acknowledgements\n\nAdapted from [R for Data Science Ch 2](https://r4ds.hadley.nz/data-visualize)\nand some materials by Dr. Colin Rundel at Duke\n\n\n## Why visualize? \n\n> “The simple graph has brought more information to the data analyst’s mind than any other device.” — John Tukey\n\n## Datasaurus dozen {.smaller}\n\n```{r}\n#| echo: false\nlibrary(tidyverse)\nlibrary(datasauRus)\n\ndatasaurus_dozen %>% \ngroup_by(dataset) %>% \nsummarize(\n    mean_x    = mean(x),\n    mean_y    = mean(y),\n    std_dev_x = sd(x),\n    std_dev_y = sd(y),\n    corr_x_y  = cor(x, y)\n)\n```\n\n\n::: aside\nDatasaurus was created by Alberto Cairo, `library(datasauRus)`\n:::\n\n## Datasaurus dozen {.smaller}\n\n```{r }\n#| echo: false\n#| fig-height: 6\n#| fig-width: 8\n  ggplot(datasaurus_dozen, aes(x = x, y = y, colour = dataset))+\n    geom_point()+\n    theme_classic()+\n    theme(legend.position = \"none\")+\n    facet_wrap(~dataset, ncol = 4)\n```\n\n\n::: aside\nDatasaurus was created by Alberto Cairo\n:::\n\n\n\n## Why visualize? \n\n> \"`Visualization` is a fundamentally human activity. A good visualization will show you things you did not expect or raise new questions about the data. A good visualization might also hint that you’re asking the wrong question or that you need to collect different data. Visualizations can surprise you, but they don’t scale particularly well because they require a human to interpret them.\" -- R4DS\n\n--- \n\n![](/include/figures/ggplot-hexlogo.png){#fig-ggplothexlogo fig-align=\"center\" width=20%}\n\n## ggplot2 loads with tidyverse\n\n```{r}\n#| echo: true\n#| message: true\nlibrary(tidyverse)\n```\n\n## Why ggplot2? \n\n> \"R has several systems for making graphs, but ggplot2 is one of the most elegant and most versatile. ggplot2 implements the `grammar of graphics`, a coherent system for describing and building graphs. With ggplot2, you can do more and faster by learning one system and applying it in many places.\" -- R4DS\n\n\n\n## Today's data: `ratings` {.smaller}\n\n> Subjective frequency ratings, ratings of estimated weight, and ratings of estimated size, averaged\nover subjects, for 81 concrete English nouns. -- languageR\n\n```{r}\n#| echo: true\nlibrary(languageR)\nglimpse(ratings)\n```\n\n## Today's data: `ratings` {.smaller}\n\nWe will make use of the following variables:\n\n1. `Frequency` - actual word frequency\n2. `meanFamiliarity` - subjective frequency rating\n3. `Class` - whether word is a plant or animal\n\n. . . \n\n```{r}\n#| echo: false\nratings %>% \n    select(Word, Frequency, meanFamiliarity, Class) %>%\n    glimpse()\n```\n\n## Today's goal {.smaller}\n\nCreate this figure showing the relationship between actual frequency and subjective frequency rating of each word, considering the class the word belongs to\n\n\n\n```{r}\n#| echo: false\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) +\n  scale_color_brewer(palette = \"Paired\")\n```\n\n\n# The basic ggplot\n\n1. Using your `data`\n2. define how variables in your dataset are mapped to visual properties (`aesthetics`)\n3. determine the geometrical object that a plot uses to represent data (`geom`)\n\n\n\n## 1 `data` {.smaller}\n\n> Use `ratings` data\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"1-3\"\nggplot(\n    data = ratings\n )\n```\n\n## 2 `aesthetic mapping` {.smaller}\n\n> Map `Frequency` to x-axis and `meanFamiliarity` to y-axis. \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"3-6\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n )\n```\n\n## 3 `geom` {.smaller}\n\n> Represent each value with a point.\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point()\n```\n\n# Adding to the basics\n\n## Mapping categorical variables {.smaller}\n\n> When a categorical variable is mapped to an aesthetic, ggplot2 will automatically assign a unique value of the aesthetic (here color) ... a process known as `scaling`. -- R4DS\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"6\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity,\n        color = Class\n    )\n ) +\n  geom_point()\n```\n\n\n## Global vs. local `aesthetics` {.smaller}\n\n- **globally** in `ggplot()`, which are passed down to all geoms\n- **locally** in `geom_*()` which are used by that geom only\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class)\n    ) \n```\n\n\n\n## Mapping vs. setting `aesthetics` {.smaller}\n\n- mapping allows us to determine a geom's aesthetics based on a variable, and is passed as argument in `aes()`\n- setting allows us to set a geom's aestheics to a constant value (not based on any variable), and passed as argument in `geom_*()` directly\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"10\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) \n```\n\n\n\n# Labels\n\n\n## `labels`: title and subtitle {.smaller}\n\n> Add title \"Subjective frequency ratings\" with subtitle \"for 81 english nouns\"\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12-15\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\"\n  ) \n```\n\n## `labels`: x and y axis {.smaller}\n\n> Label x-axis \"Actual frequency\" and y-axis \"Frequency rating\"\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"15-16\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\"\n  ) \n```\n\n::: aside \nNote these are mapped to the aesthetic (x and y)\n:::\n\n## `labels`: legend {.smaller}\n\n> Label the legend \"word class\".\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"17\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) \n```\n\n::: aside \nNote these are mapped to the aesthetic as well (color)\n:::\n\n# Theme and adjusting scaling\n\n## `themes` {.smaller}\n\n> Apply classic theme with base_size 20.\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"19\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `scales`: changing color {.smaller}\n\n> Remember: When a categorical variable is mapped to an aesthetic, ggplot2 will automatically assign a unique value of the aesthetic (here color) ... a process known as `scaling`. -- R4DS\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"20\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) +\n  scale_color_brewer(palette = \"Paired\")\n```\n\n# Aesthetics\n\n## color\n\nMap the color aesthetic to a variable\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## color\n\nSet a constant value for the color aesthetic \n\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\",\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n\n## size \n\nSetting a constant value for the size aesthetic\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"10\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## size\n\nMapped the size aesthetic to a variable \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        size = Complex\n    ),\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n## shape\n\nMap the shape aesthetic to a different variable\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Complex),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## shape \n\nMap the shape aesthetic to the same variable \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Class),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n\n## alpha \n\nSet a constant value for the alpha aesthetic\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Class),\n    alpha = 0.5,\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n## alpha\n\nMapped to a variable \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9-12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(\n        color = Class,\n        shape = Class,\n        alpha = Length),\n    size = 3\n    ) +\n theme_classic(base_size = 20)\n\n```\n\n\n# Geometric objects \n\n## `geom_*()` aka geoms {.smaller}\n\nThere are [many](https://ggplot2.tidyverse.org/reference/#geoms). We will start with these, and add a few additional geoms as we move through the course: \n\n| | |\n| --- | ------- | \n| `geom_histogram()` | histogram, distribution of a continuous variable |\n| `geom_density()` | distribution of a continuous variable |\n| `geom_bar()` | distribution of a categorical data | \n| `geom_point()` |  scatterplot |\n| `geom_smooth()` | smoothed line of best fit |\n\n## `geom_histogram()` \n\n> A histogram divides the x-axis into equally spaced bins and then uses the height of a bar to display the number of observations that fall in each bin. -- R4DS\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"7\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram() \n\n```\n\n## `geom_histogram()`\n\nbins - How many bins should we have? \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        bins = 10\n    )\n\n```\n\n\n## `geom_histogram()`\n\nbinwidth - How wide should the bins be?  \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        binwidth = 0.25\n    )\n\n```\n\n## `geom_histogram()`\n\ncolor - What should the outline color be? \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        binwidth = 0.25,\n        color = \"red\"\n    )\n\n```\n\n## `geom_histogram()`\n\nfill - What should the fill color be? \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"10\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_histogram(\n        binwidth = 0.25,\n        color = \"red\",\n        fill = \"lightblue\"\n    )\n\n```\n\n## `geom_density()` {.smaller}\n\n> Imagine a histogram made out of wooden blocks. Then, imagine that you drop a cooked spaghetti string over it. The shape the spaghetti will take draped over blocks can be thought of as the shape of the density curve. -- R4DS \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"7\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity\n    )\n) + \n    geom_density() \n\n```\n\n## `geom_density()`\n\nMap Class to color aesthetic \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"5\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity,\n        color = Class\n    )\n) + \n    geom_density() \n\n```\n\n## `geom_density()`\n\nSet linewidth \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity,\n        color = Class\n    )\n) + \n    geom_density(linewidth = 2) \n\n```\n\n## `geom_density()`\n\nMap Class to fill and set alpha \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = meanFamiliarity,\n        fill = Class\n    )\n) + \n    geom_density(alpha = 0.5) \n\n```\n\n## `geom_bar()` {.smaller}\n\n> To examine the distribution of a categorical variable, you can use a bar chart. The height of the bars displays how many observations occurred with each x value. -- R4DS\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class\n    )\n) + \n    geom_bar()\n\n```\n\n## `geom_bar()` - stacked {.smaller}\n\nWe can use stacked bar plots to visualize the relationship between two categorical variables\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"5\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class,\n        fill = Complex\n    )\n) + \n    geom_bar()\n\n```\n\n## `geom_bar()` - relative frequency {.smaller}\n\nWe can use relative frequency to visualize the relationship between two categorical variables (as a percentage)\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class,\n        fill = Complex\n    )\n) + \n    geom_bar(position = \"fill\")\n\n```\n\n## `geom_bar()` - dodged {.smaller}\n\nWe can use a dodged bar plot to visualize the relationship between two categorical variables side-by-side, not stacked\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Class,\n        fill = Complex\n    )\n) + \n    geom_bar(position = \"dodge\")\n\n```\n\n## `geom_point()` {.smaller}\n\n> Scatterplots are useful for displaying the relationship between two numerical variables -- R4DS\n\n. . . \n\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\", \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth()` {.smaller}\n\ndraws a best fitting curve \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\", \n    size = 3\n    ) +\n  geom_smooth() +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth(method=\"lm\")` {.smaller}\n\ndraws the best fitting linear model\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"12\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    color = \"blue\", \n    size = 3\n    ) +\n  geom_smooth(method=\"lm\") +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth(method=\"lm\")` {.smaller}\n\nWe can also map to color, by specifying globally\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"6\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity,\n        color = Class\n    )\n ) +\n  geom_point( \n    size = 3\n    ) +\n  geom_smooth(method=\"lm\") +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n## `geom_point()` with `geom_smooth(method=\"lm\")` {.smaller}\n\nOr include only a single smooth, by specifying color in the point geom only\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    aes(color = Class),\n    size = 3\n    ) +\n  geom_smooth(method=\"lm\") +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) \n```\n\n\n\n# Facets \n\nsmaller plots that display different subsets of data\n\n## `facet_grid()`\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(Class ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n## `facet_grid()` {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(Class ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n. . . \n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point(\n    aes(color = Class, shape = Complex)\n  ) +\n  theme_classic(base_size = 20) \n```\n\n\n## `facet_grid()` - just columns {.smaller}\n\nand note we can still map other aesthetics!\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(. ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n## `facet_grid()` - just columns {.smaller}\n\nand note we can still map other aesthetics!\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"8-11\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point(\n    aes(color = Class),\n    shape = \"triangle\"\n  ) +\n  facet_grid(. ~ Complex) +\n  theme_classic(base_size = 20) \n```\n\n\n\n## `facet_grid()` - just rows {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_grid(Class ~ .) +\n  theme_classic(base_size = 20) \n```\n\n\n## `facet_wrap()`  {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_wrap(~ Class) +\n  theme_classic(base_size = 20) \n```\n\n## `facet_wrap()` - number of columns {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n#| code-line-numbers: \"9\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point() +\n  facet_wrap(~ Class, ncol = 1) +\n  theme_classic(base_size = 20) \n```\n\n# Helper functions \n\n## remember our goal plot? {.smaller}\n\n```{r}\n#| echo: true\n#| output-location: column\n\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency, \n        y = meanFamiliarity\n    )\n ) +\n  geom_point( \n    mapping = aes(color = Class), \n    size = 3\n    ) +\n  labs(\n    title = \"Subjective frequency ratings\", \n    subtitle = \"for 81 english nouns\",\n    x = \"Actual frequency\",\n    y = \"Frequency rating\",\n    color = \"word class\"\n  ) +\n  theme_classic(base_size = 20) +\n  scale_color_brewer(palette = \"Paired\")\n```\n\n## `last_plot()` {.smaller}\n\nreturns the last plot\n\n```{r}\nlast_plot()\n```\n\n## `ggsave()` \n\nsaves last plot\n\n```r\nggsave(\"plot.png\", width=5, height=5)\n```\n\n# Themes \n\nggplot comes with many [Complete themes](https://ggplot2.tidyverse.org/reference/ggtheme.html)\n\n## Default theme {.smaller}\n\n```{r}\nlast_plot() + theme_gray(base_size=20)\n```\n\n## Sample themes {.smaller}\n\n:::: {.columns}\n\n::: {.column width=50%}\n\n```{r}\nlast_plot() + theme_bw(base_size=20)\n```\n\n```{r}\nlast_plot() + theme_classic(base_size=20)\n```\n\n::: \n\n::: {.column width=50%}\n\n```{r}\nlast_plot() + theme_minimal(base_size=20)\n```\n\n```{r}\nlast_plot() + theme_void(base_size=20)\n```\n\n::: \n\n::::\n\n\n# Shortcuts \n\n## ggplot2 calls {.smaller}\n\n:::: {.columns}\n\n::: {.column width=50%}\n\nExplicit argument names:\n\n```{r}\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n\n::: \n\n\n::: {.column width=50%}\n\nImplied argument names:\n\n```{r}\nggplot(\n    ratings,\n    aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n::: \n\n::::\n\n\n## the pipe `%>%` {.smaller}\n\n> the pipe takes the thing on its left and passes it along to the function on its right \n\n. . .\n\n`x %>% f(y)` is equivalent to `f(x, y)`\n\n. . . \n\n```{r}\nx <- c(1.0, 2.245, 3, 4.22222)\nx\n\n# pass x as an argument to function usual way\nround(x, digits = 2)\n```\n\n. . . \n```{r}\n# pass x as an argument to function with pipe\nx %>% round(digits = 2)\n```\n\n\n::: aside\nThere are two ways to write the pipe: `%>%` or `|>`\n:::\n\n## the pipe `%>%` and ggplot {.smaller}\n\n\n:::: {.columns}\n\n::: {.column width=50%}\n\nImplied argument names:\n\n```{r}\n#| code-line-numbers: \"2\"\nggplot(\n    data = ratings,\n    mapping = aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n\n::: \n\n\n::: {.column width=50%}\n\nImplied argument names + pipe:\n\n```{r}\n#| code-line-numbers: \"1\"\n\nratings %>% \nggplot(\n    aes(\n        x = Frequency,\n        y = meanFamiliarity\n    )\n) + \n   geom_point()\n```\n\n::: \n\n::::\n\n::: aside\nNote that we pipe `%>%` in arguments to functions but we ADD `+` layers to ggplot. Common mistake!\n:::\n\n## Exercise 1\n\n> The basic ggplot\n\n![Data from `penguins` dataframe in `palmerpenguins` package](/include/targets/class-target-basicpenguins.png){#fig-basicpenguintarget}\n\n## Exercise 2\n\n> Adding aesthetics and layers\n\n![Data from `penguins` dataframe in `palmerpenguins` package](/include/targets/class-target-penguins.png){#fig-penguintarget}"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","incremental":true,"output-file":"data-visualization.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.3.353","auto-stretch":true,"callout-appearance":"simple","title":"Data Visualization","subtitle":"Data Science for Studying Language and the Mind","author":"Katie Schuler","date":"09-07-2023","theme":"dark","slideNumber":true,"footer":"[https://kathrynschuler.com/datasci](https://kathrynschuler.com/datasci/)"}}},"projectFormats":["html"]}